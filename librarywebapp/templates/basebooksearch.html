<!-- Name:       Li Gao  -->
<!-- Student ID: 1155084 -->

{% extends "base.html" %}

{% block title %}
Search Book -
{% endblock %}

{% block header %}
{% endblock %}

{% block navigation %}
{% endblock %}

{% block content %}
<h3 style="color:SlateBlue;">Available Book List</h3>
<h4 style="color:SlateBlue;">A list of all books in our collection</h4>
<hr />

<form class="form-inline" id="searchbook" name="searchbook" {% block postcontent %}{% endblock %} method="post">
    <div class="form-group">
        <label for="title">Title:</label>
        <input type="text" class="form-control" id="title" placeholder="Enter title" name="title" style="width:50%" value="{{title}}">
    </div>
    <div class="form-group">
        <label for="author">Author:</label>
        <input type="text" class="form-control" id="author" placeholder="Enter author" name="author" style="width:50%" value="{{author}}">
    </div>
    <br>
    <button type="button" id="reset" style="font-size: 18px; padding: 2px; background: rgb(19, 83, 156); color: white" class="btn btn-default" onclick="resetForm()">Reset </button>
    <button type="submit" id="submit" style="font-size: 18px; padding: 2px; background: rgb(19, 83, 156); color: white" class="btn btn-default">Search</button>
</form>
<br>

<script>
    const btn = document.querySelector('#submit');
    const auth = document.querySelector('#author')
    const title = document.querySelector('#title')
    btn.onclick = (event) => { 
        // show the selected index
        if(auth.value == "" && title.value == "")
        {
            event.preventDefault();
            alert("Oops! Please enter an author and/or a book name and try again!");
        }
    };

    function resetForm() {
    document.getElementById("author").value = "";
    document.getElementById("title").value = "";
  }
</script>

<!-- 1. Each row is striped and hoverable-->
<table style="width:90%; border: 1px solid black;" class ="table table-striped table-hover">
    <thead style="background-color: #96D4D4;">
        <tr>
            <th scope="col">BookCopyID</th>
            <th scope="col" style="width:50%">Book Title</th>
            <th scope="col">Author</th>
            <th scope="col">Format</th>
            <th scope="col">Availability</th>
            <th scope="col">Due Date</th>
        </tr>
    </thead>
    <tbody>
        {% for book in booklist %}
        <tr>
            <td>{{book[0]}}</td>
            <td>{{book[1]}}</td>
            <td>{{book[2]}}</td>
            <td>{{book[3]}}</td>
            {% if book[3] == "eBook" or book[3] == "Audio Book"%}
            <td>Available</td>
            {% else %}
            <td>{{book[4]}}</td>
            {% endif %}

            {% if (book[3] == "eBook" or book[3] == "Audio Book") or book[4] == "Available" %}
            <td></td>
            {% else %}
            <td>{{book[5]}}</td>
            {% endif %}
        </tr>
    {% endfor %}
    </tbody>

</table>

{% endblock %}